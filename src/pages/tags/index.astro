---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

const all_posts = await getCollection("blog");
type FrontmatterPost = (typeof all_posts)[number] & {
	rendered: {
		metadata: {
			frontmatter: {
				tags?: string[];
			};
		};
	};
};
const tags = Array.from(
	new Set(
		(all_posts as FrontmatterPost[])
			.map((post) => post.rendered.metadata.frontmatter.tags ?? [])
			.flat()
			.filter(Boolean),
	),
);
---

<Layout title="Tags">
	<section>
		<h3 class="text-3xl font-bold mb-12">Tags</h3>
		<div class="flex flex-wrap gap-2 mt-12">
			{
				tags.sort().map((tag) => {
					return (
						<a
							href={`/tags/${tag}`}
							class="bg-gray-200 text-gray-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded hover:bg-gray-300"
						>
							<h2>#{tag}</h2>
						</a>
					);
				})
			}
		</div>
	</section>
</Layout>